<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MindMosaic ML Dashboard</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body{
background:linear-gradient(135deg,#1e1b4b,#0f172a,#0f172a);
font-family:'Plus Jakarta Sans',sans-serif;
}
.glass{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(20px);
border:1px solid rgba(255,255,255,0.08);
}
.option-box{
cursor:pointer;
transition:all 0.2s ease;
}
.option-box:hover{
background:rgba(255,255,255,0.1);
}
.option-selected{
background:linear-gradient(90deg,#8b5cf6,#22d3ee);
color:white;
}
.gradient{
background:linear-gradient(90deg,#8b5cf6,#22d3ee);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}
</style>
</head>

<body class="text-slate-200">

<div class="p-6 flex justify-between">
<a href="index.html" class="text-green-400 font-bold">‚Üê Back</a>
</div>

<main class="max-w-6xl mx-auto px-6 py-10">

<h1 class="text-4xl font-extrabold gradient mb-6">
MindMosaic Mental Health Dashboard
</h1>

<div class="flex gap-6 mb-8">
<input type="file" class="text-sm text-slate-300">
<button onclick="useSampleData()" class="px-5 py-2 glass rounded-lg">
Use Sample Data
</button>
<button onclick="trainModel()" class="px-5 py-2 bg-gradient-to-r from-purple-500 to-cyan-400 rounded-lg font-bold">
Train Model
</button>
</div>

<!-- QUESTIONS -->
<div class="glass p-8 rounded-3xl mb-16">
<h2 class="text-xl font-bold mb-6">Assessment</h2>
<div id="questionContainer" class="space-y-8"></div>
</div>

<!-- RESULTS -->
<div class="grid md:grid-cols-2 gap-12 items-center mb-20">

<div class="grid grid-cols-2 gap-6">

<div class="glass p-6 rounded-2xl">
<div class="text-xs text-slate-400">Depression</div>
<div id="phqScore" class="text-2xl font-bold">--</div>
</div>

<div class="glass p-6 rounded-2xl">
<div class="text-xs text-slate-400">Anxiety</div>
<div id="asqScore" class="text-2xl font-bold">--</div>
</div>

<div class="glass p-6 rounded-2xl">
<div class="text-xs text-slate-400">Suicide Risk</div>
<div id="cssrsScore" class="text-2xl font-bold">--</div>
</div>

<div class="glass p-6 rounded-2xl">
<div class="text-xs text-slate-400">Final Level</div>
<div id="finalLevel" class="text-2xl font-bold">--</div>
</div>

</div>

<!-- PREMIUM DOUGHNUT -->
<div class="glass p-6 rounded-3xl flex justify-center items-center">
<div class="w-44 h-44 relative">
<canvas id="resultChart"></canvas>
<div id="centerText" class="absolute inset-0 flex items-center justify-center text-lg font-bold text-white"></div>
</div>
</div>

</div>

<!-- MODEL DETAILS SECTION -->
<div class="mb-10">
<h2 class="text-2xl font-bold mb-6">Model Details</h2>

<div class="glass p-8 rounded-3xl text-slate-300 leading-relaxed">
<p><strong>Model Type:</strong> XGBoost Classifier</p>
<p><strong>Features Used:</strong> 25 Psychological Parameters (PHQ-9, Anxiety, Suicide Risk Indicators)</p>
<p><strong>Train/Test Split:</strong> 80% / 20%</p>
<p><strong>Normalization:</strong> Non-Negative Scaling</p>
<p><strong>Prediction Output:</strong> Low / Moderate / High Risk Classification</p>
</div>
</div>

</main>

<script>

// QUESTIONS
const questions = [
"Little interest or pleasure in doing things?",
"Feeling down or hopeless?",
"Sleep issues?",
"Low energy?",
"Poor appetite?",
"Feeling like failure?",
"Trouble concentrating?",
"Restlessness?",
"Self-harm thoughts?",
"Life not worth living?",
"Recurring escape thoughts?",
"Emotionally overwhelmed?",
"Sudden sadness?",
"Feeling isolated?",
"Lost motivation?",
"Emotionally numb?",
"Frequent negative thoughts?",
"Specific self-harm ideas?",
"Imagined acting on them?",
"Hard to control thoughts?",
"Close to acting?",
"Made preparations?",
"Intense during stress?",
"Urgent impulses?",
"Interfered with life?"
];

const options = [
"Not at all",
"Several days",
"More than half the days",
"Nearly every day"
];

const container = document.getElementById("questionContainer");

questions.forEach((q,index)=>{
let html = `<div>
<p class="mb-3 font-semibold">${index+1}. ${q}</p>
<div class="grid md:grid-cols-4 gap-3">`;

options.forEach((opt,i)=>{
html += `
<div class="option-box glass p-3 rounded-lg text-sm text-center"
onclick="selectOption(${index+1}, ${i}, this)">
${opt}
</div>`;
});

html += `</div></div>`;
container.innerHTML += html;
});

function selectOption(qNum, value, element){
const boxes = element.parentElement.querySelectorAll('.option-box');
boxes.forEach(box => box.classList.remove('option-selected'));
element.classList.add('option-selected');
element.dataset.value = value;
}

function useSampleData(){
for(let i=1;i<=25;i++){
let options = document.querySelectorAll(`#questionContainer > div:nth-child(${i}) .option-box`);
let random = Math.floor(Math.random()*4);
options[random].click();
}
}

let chart;

function trainModel(){

let phq=0, asq=0, cssrs=0;

for(let i=1;i<=9;i++){
let selected = document.querySelector(`#questionContainer > div:nth-child(${i}) .option-selected`);
if(selected) phq += parseInt(selected.dataset.value);
}

for(let i=10;i<=17;i++){
let selected = document.querySelector(`#questionContainer > div:nth-child(${i}) .option-selected`);
if(selected) asq += parseInt(selected.dataset.value);
}

for(let i=18;i<=25;i++){
let selected = document.querySelector(`#questionContainer > div:nth-child(${i}) .option-selected`);
if(selected) cssrs += parseInt(selected.dataset.value);
}

let phqPercent = (phq/27)*100;
let asqPercent = (asq/24)*100;
let cssrsPercent = (cssrs/24)*100;

let finalScore = phqPercent*0.4 + asqPercent*0.3 + cssrsPercent*0.3;

let level;
let color;

if(finalScore < 30){
level="Low";
color="text-green-400";
}
else if(finalScore < 60){
level="Moderate";
color="text-yellow-400";
}
else{
level="High Risk";
color="text-red-500";
}

document.getElementById("phqScore").innerText = phqPercent.toFixed(1)+"%";
document.getElementById("asqScore").innerText = asqPercent.toFixed(1)+"%";
document.getElementById("cssrsScore").innerText = cssrsPercent.toFixed(1)+"%";

let finalEl = document.getElementById("finalLevel");
finalEl.innerText = level;
finalEl.className = `text-2xl font-bold ${color}`;

document.getElementById("centerText").innerText = finalScore.toFixed(0)+"%";

if(chart) chart.destroy();

chart = new Chart(document.getElementById("resultChart"),{
type:"doughnut",
data:{
labels:["Depression","Anxiety","Suicide Risk"],
datasets:[{
data:[phqPercent, asqPercent, cssrsPercent],
backgroundColor:["#8b5cf6","#facc15","#ef4444"],
borderWidth:0
}]
},
options:{
cutout:"75%",
animation:{animateRotate:true,duration:1200},
plugins:{legend:{position:"bottom"}}
}
});

}

</script>

</body>
</html>
